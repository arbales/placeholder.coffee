// Placeholder.coffee, 0.1
// Depends on Underscore and jQuery/Zepto.
// Copyright (c) 2011 Austin Bales (austinbales.com)
// Dual licensed under the MIT and GPL licenses.
(function(){var a,b,c,d,e;c=typeof exports!="undefined"&&exports!==null?exports:this,c.Placeholderize=function(a){return _(a).isElement()?e(a):_(a).isArray()?_(a).each(function(a){return e(a)}):$(a).each(function(a,b){return e(b)})},e=function(c){var d,e,f,g,h,i;d=$(c);if(h=d.prop("placeholder"))return e=d.outerHeight(!0),d.prop("placeholder",""),d.wrap("<div class='holding'></div>"),i=d.parent().addClass(d.prop("type")),f=$(document.createElement("span")).addClass("holder").text(h),d.val()!==""&&f.hide(),i.append(f),g=Math.ceil((e-f.outerHeight())/5),f.css({top:""+g+"px",left:""+g*3+"px",position:"absolute"}),a(),b()},a=_.once(function(){return $(".holding .holder").live("click",function(a){return $(a.currentTarget).siblings("input").focus()}),$(".holding input").live("focus",function(a){return $(a.currentTarget).parent().addClass("focus")}),$(".holding input").live("change keyup blur",function(a){return d(a.currentTarget)}),$(".holding input").live("blur",function(a){var b;return b=$(a.currentTarget),b.parent().removeClass("focus")})}),b=_.once(function(){return setTimeout(function(){return $(".holding input").each(function(a,b){return d(b)})},300)}),d=function(a){var b;return b=$(a),b.val()!==""?b.next("span.holder").fadeOut(100):b.next("span.holder").fadeIn(100)}}).call(this)